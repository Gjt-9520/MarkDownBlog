---
title: "斗地主游戏"
date: 2024-03-29
description: "Terminal版、GUI版"
cover: https://github.com/Gjt-9520/Resource/blob/main/Blogimage/project/PokerGame.png?raw=true
tags: ["GUI"]
category: "项目开发"
updated: 2024-03-30
swiper_index: 
top_group_index: 
---

# Terminal版斗地主游戏

## 准备牌、洗牌、发牌

步骤:
1. 准备牌
2. 洗牌
3. 发牌

```java
import java.util.ArrayList;
import java.util.Collections;

public class PokerGame {

    // 牌盒
    static ArrayList<String> list = new ArrayList<>();

    static {
        // 准备牌
        String[] color = new String[]{"♦", "♣", "♥", "♠"};
        String[] number = new String[]{"3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A", "2"};
        // 外循环:花色
        for (String c : color) {
            // 内循环:数字
            for (String n : number) {
                list.add(c + n);
            }
        }
        list.add("大王");
        list.add("小王");
    }

    public PokerGame() {
        // 洗牌
        Collections.shuffle(list);
        // 发牌
        ArrayList<String> lordPoker = new ArrayList<>();
        ArrayList<String> player1Poker = new ArrayList<>();
        ArrayList<String> player2Poker = new ArrayList<>();
        ArrayList<String> player3Poker = new ArrayList<>();

        for (int i = 0; i < list.size(); i++) {
            String poker = list.get(i);
            // 三张地主牌(底牌)
            if (i <= 2) {
                lordPoker.add(poker);
                continue;
            }
            // 给三个玩家依次发牌
            if (i % 3 == 0) {
                player1Poker.add(poker);
            } else if (i % 3 == 1) {
                player2Poker.add(poker);
            } else {
                player3Poker.add(poker);
            }
        }

        // 看牌
        lookPoker("底牌", lordPoker);
        lookPoker("玩家1", player1Poker);
        lookPoker("玩家2", player2Poker);
        lookPoker("玩家3", player3Poker);
    }

    // 看牌
    public void lookPoker(String playerName, ArrayList<String> playerPoker) {
        StringBuilder stringBuilder = new StringBuilder(playerName + ":");
        for (String poker : playerPoker) {
            stringBuilder.append(poker).append(" ");
        }
        System.out.println(stringBuilder);
    }
}
```

```java
public class Game {
    public static void main(String[] args) {
        new PokerGame();
    }
}
```

## 排序

### 利用序号进行排序

![斗地主排序_利用序号进行排序](../images/斗地主排序_利用序号进行排序.png)

- 如果原始数据的规律非常复杂,可以先手动排序让每一个数据跟唯一的序号产生对应关系
- 序号就是数字,规律非常简单,后续的所有操作就以序号为准
- 当真正需要操作原始数据的时候,再通过序号找到原始数据即可

```java
import java.util.*;

public class PokerGame {

    // 牌盒
    static HashMap<Integer, String> map = new HashMap<>();
    static ArrayList<Integer> list = new ArrayList<>();

    static {
        // 准备牌
        String[] color = new String[]{"♦", "♣", "♥", "♠"};
        String[] number = new String[]{"3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A", "2"};
        // 牌的序号
        int serialNumber = 1;
        // 外循环:数字花色
        for (String n : number) {
            // 内循环:花色
            for (String c : color) {
                map.put(serialNumber, c + n);
                list.add(serialNumber);
                serialNumber++;
            }
        }
        map.put(serialNumber, "小王");
        list.add(serialNumber);
        serialNumber++;
        map.put(serialNumber, "大王");
        list.add(serialNumber);
    }

    public PokerGame() {
        // 洗牌
        Collections.shuffle(list);

        // 发牌
        TreeSet<Integer> lordPoker = new TreeSet<>();
        TreeSet<Integer> player1Poker = new TreeSet<>();
        TreeSet<Integer> player2Poker = new TreeSet<>();
        TreeSet<Integer> player3Poker = new TreeSet<>();

        for (int i = 0; i < list.size(); i++) {
            // 牌的序号
            int serialNumber = list.get(i);
            // 三张地主牌(底牌)
            if (i <= 2) {
                lordPoker.add(serialNumber);
                continue;
            }
            // 给三个玩家依次发牌
            if (i % 3 == 0) {
                player1Poker.add(serialNumber);
            } else if (i % 3 == 1) {
                player2Poker.add(serialNumber);
            } else {
                player3Poker.add(serialNumber);
            }
        }

        // 看牌
        lookPoker("底牌", lordPoker);
        lookPoker("玩家1", player1Poker);
        lookPoker("玩家2", player2Poker);
        lookPoker("玩家3", player3Poker);
    }

    // 看牌
    public void lookPoker(String playerName, TreeSet<Integer> playerPokerSerialNumber) {
        StringBuilder stringBuilder = new StringBuilder(playerName + ":");
        for (Integer serialNumber : playerPokerSerialNumber) {
            String poker = map.get(serialNumber);
            stringBuilder.append(poker).append(" ");
        }
        System.out.println(stringBuilder);
    }
}
```

```java
public class Game {
    public static void main(String[] args) {
        new PokerGame();
    }
}
```

### 给每一张牌计算价值

![斗地主排序_给每一张牌计算价值](../images/斗地主排序_给每一张牌计算价值.png)

根据牌的大小关系定义每一张牌的价值

```java
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;

public class PokerGame {

    // 牌盒
    static ArrayList<String> list = new ArrayList<>();

    // 牌的价值
    static HashMap<String, Integer> map = new HashMap<>();

    static {
        // 准备牌
        String[] color = new String[]{"♦", "♣", "♥", "♠"};
        String[] number = new String[]{"3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A", "2"};
        // 外循环:花色
        for (String c : color) {
            // 内循环:数字
            for (String n : number) {
                list.add(c + n);
            }
        }
        list.add(" 大王");
        list.add(" 小王");

        // 指定牌的价值
        map.put("J", 11);
        map.put("Q", 12);
        map.put("K", 13);
        map.put("A", 14);
        map.put("2", 15);
        map.put("小王", 16);
        map.put("大王", 17);
    }

    public PokerGame() {
        // 洗牌
        Collections.shuffle(list);
        // 发牌
        ArrayList<String> lordPoker = new ArrayList<>();
        ArrayList<String> player1Poker = new ArrayList<>();
        ArrayList<String> player2Poker = new ArrayList<>();
        ArrayList<String> player3Poker = new ArrayList<>();

        for (int i = 0; i < list.size(); i++) {
            String poker = list.get(i);
            // 三张地主牌(底牌)
            if (i <= 2) {
                lordPoker.add(poker);
                continue;
            }
            // 给三个玩家依次发牌
            if (i % 3 == 0) {
                player1Poker.add(poker);
            } else if (i % 3 == 1) {
                player2Poker.add(poker);
            } else {
                player3Poker.add(poker);
            }
        }

        // 排序
        pokerSort(player1Poker);
        pokerSort(player2Poker);
        pokerSort(player3Poker);

        // 看牌
        lookPoker("底牌", lordPoker);
        lookPoker("玩家1", player1Poker);
        lookPoker("玩家2", player2Poker);
        lookPoker("玩家3", player3Poker);
    }

    // 排序
    public static void pokerSort(ArrayList<String> playerPoker) {
        // sort底层是Arrays.sort,即插入排序+二分查找
        Collections.sort(playerPoker, new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                // o1:表示当前要插入到有序序列中的牌
                // o2:表示已经在有序序列中存在的牌
                // 负数:o1小,插入到前面
                // 正数:o1大,插入到后面
                // 0:o1和o2数字一样大,需要按照花色再次排序

                // 计算o1的花色和价值
                String color1 = o1.substring(0, 1);
                int value1 = getValue(o1);

                // 计算o2的花色和价值
                String color2 = o2.substring(0, 1);
                int value2 = getValue(o2);

                int numberResult = value1 - value2;
                return numberResult == 0 ? color1.compareTo(color2) : numberResult;
            }
        });
    }

    // 计算牌的价值
    public static int getValue(String poker) {
        // 获取牌上的数字
        String number = poker.substring(1);
        // 判断数字是否在map上存在
        if (map.containsKey(number)) {
            // 如果存在,则返回其map上对应的价值
            return map.get(number);
        } else {
            // 如果不存在,则通过类型转换,返回其对应数字的价值
            return Integer.parseInt(number);
        }
    }

    // 看牌
    public void lookPoker(String playerName, ArrayList<String> playerPoker) {
        StringBuilder stringBuilder = new StringBuilder(playerName + ":");
        for (String poker : playerPoker) {
            stringBuilder.append(poker).append(" ");
        }
        System.out.println(stringBuilder);
    }
}
```

```java
public class Game {
    public static void main(String[] args) {
        new PokerGame();
    }
}
```

# GUI版斗地主游戏

