---
title: "方法引用"
date: 2024-04-02
description: ""
cover: https://github.com/Gjt-9520/Resource/blob/main/Aimage-135/Aimage111.jpg?raw=true
tags: ["Java SE","集合"]
category: "学习笔记"
updated: 2024-04-03
swiper_index: 
top_group_index: 
---

# 方法引用

方法引用就是把已经有的方法拿过来用,当作函数式接口中抽象方法的方法体

方法引用符:`::`

细节:
1. **引用处必须是函数式接口**
2. **被引用的方法必须已经存在**(可以是Java已经写好的,也可以是一些第三方工具类)
3. **被引用方法的形参和返回值需跟抽象方法保持一致**
4. **被引用方法的功能要满足当前需求**

范例:

```java
import java.util.Arrays;
import java.util.Comparator;

public class Test {
    public static void main(String[] args) {
        Integer[] arr = {3, 5, 4, 1, 6, 2};

        // 匿名内部类
        // Arrays.sort(arr, new Comparator<Integer>() {
        //     @Override
        //     public int compare(Integer o1, Integer o2) {
        //         return o2 - o1;
        //     }
        // });
        // System.out.println(Arrays.toString(arr));

        // Lambda表达式
        // Arrays.sort(arr, ((o1, o2) -> o2 - o1));
        // System.out.println(Arrays.toString(arr));

        // 方法引用
        // 表示引用Test类里面的subtraction方法,把这个方法当作抽象方法的方法体
        Arrays.sort(arr, Test::subtraction);
        System.out.println(Arrays.toString(arr));
    }

    public static int subtraction(int num1, int num2) {
        return num2 - num1;
    }
}
```

# 分类

## 引用静态方法

格式:`类名::静态方法`          
范例:`Integer::parseInt`

练习:

集合中有数字"1","2","3","4","5",把他们都变成int类型

```java
import java.util.ArrayList;
import java.util.Collections;

public class Test {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        Collections.addAll(list, "1", "2", "3", "4", "5");
        list.stream().map(Integer::parseInt).forEach(System.out::println);
    }
}
```

## 引用成员方法

格式:`对象::成员方法` 
      
### 引用其他类的成员方法

格式:`其他类对象::成员方法`     

范例:

```java
public class StringOperation {
    public boolean isRight(String s) {
        return s.startsWith("张") && s.length() == 3;
    }
}
```

```java
import java.util.ArrayList;
import java.util.Collections;

public class Test {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        Collections.addAll(list, "张无忌", "张强", "张三丰", "赵敏", "周芷若");

        // list.stream().filter(new Predicate<String>() {
        //             @Override
        //             public boolean test(String s) {
        //                 return s.startsWith("张") && s.length() == 3;
        //             }
        //         })
        //         .forEach(System.out::println);

        list.stream().filter(new StringOperation()::isRight).forEach(System.out::println);
    }
}
```

### 引用本类的成员方法

格式:`this::成员方法`     

细节:**引用处不能是静态方法,因为静态方法中是没有this的**

范例:

```java
import java.util.ArrayList;
import java.util.Collections;

public class Test {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        Collections.addAll(list, "张无忌", "张强", "张三丰", "赵敏", "周芷若");

        // list.stream().filter(new Predicate<String>() {
        //             @Override
        //             public boolean test(String s) {
        //                 return s.startsWith("张") && s.length() == 3;
        //             }
        //         })
        //         .forEach(System.out::println);

        list.stream().filter(new Test()::isRight).forEach(System.out::println);
    }

    public boolean isRight(String s) {
        return s.startsWith("张") && s.length() == 3;
    }
}
```

范例:

```java
import javax.swing.*;
import java.awt.event.ActionEvent;

public class Test extends JFrame {
    public static void main(String[] args) {
        new Test();
    }

    public Test() {
        initView();
    }

    static JButton jButton = new JButton("按钮");

    public void initView() {
        JFrame jFrame = new JFrame("窗口");
        jFrame.setSize(300, 300);
        jFrame.setLayout(null);
        jFrame.setLocationRelativeTo(null);
        jFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        jButton.setBounds(90, 80, 100, 100);
        jButton.addActionListener(this::mouse);
        jFrame.getContentPane().add(jButton);

        jFrame.setVisible(true);
    }

    public void mouse(ActionEvent e) {
        if (e.getSource() == jButton) {
            System.out.println("按钮被点击了!");
        }
    }
}
```

### 引用父类的成员方法

格式:`super::成员方法`      

细节:**引用处不能是静态方法,因为静态方法中是没有super的**

范例:

```java
package Test;

import javax.swing.*;
import java.awt.event.ActionEvent;

import static Test.Test.jButton;

public class TestFu extends JFrame {
    public void mouse(ActionEvent e) {
        if (e.getSource() == jButton) {
            System.out.println("按钮被点击了!");
        }
    }
}
```

```java
package Test;

import javax.swing.*;

public class Test extends TestFu {
    public static void main(String[] args) {
        new Test();
    }

    public Test() {
        initView();
    }

    static JButton jButton = new JButton("按钮");

    public void initView() {
        JFrame jFrame = new JFrame("窗口");
        jFrame.setSize(300, 300);
        jFrame.setLayout(null);
        jFrame.setLocationRelativeTo(null);
        jFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        jButton.setBounds(90, 80, 100, 100);
        jButton.addActionListener(super::mouse);
        jFrame.getContentPane().add(jButton);

        jFrame.setVisible(true);
    }
}
```

## 引用构造方法

## 其他调用方式

### 使用类名引用成员方法

### 引用数组的构造方法