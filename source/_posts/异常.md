---
title: "异常"
date: 2024-04-04
description: ""
cover: https://github.com/Gjt-9520/Resource/blob/main/Aimage-135/Aimage113.jpg?raw=true
tags: ["Java SE"]
category: "学习笔记"
updated: 2024-04-05
swiper_index: 
top_group_index: 
---

# 异常

![问题](../images/问题.png)

![异常](../images/异常.png)

# 编译时异常和运行时异常

![编译时异常和运行时异常](../images/编译时异常和运行时异常.png)

- 编译时异常:**提醒程序员检查本地信息**
- 运行时异常:**代码出错(一般是由于参数传递错误)而导致程序出现的问题**

范例:

```java
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Test {
    public static void main(String[] args) throws ParseException {
        // 编译时异常(在编译阶段，必须要手动处理，否则代码报错)
        // String time = "2030年1月1日";
        // SimpleDateFormat sdf = new SimpleDateFormat("yyyy年MM月dd日");
        // Date date = sdf.parse(time);
        // System.out.println(date);

        // 运行时异常（在编译阶段是不需要处理的，是代码运行时出现的异常）
        // int[] arr = {1, 2, 3, 4, 5};
        // ArrayIndexOutOfBoundsException
        // System.out.println(arr[10]);
    }
}
```

# 作用

1. 异常是用来查询Bug的关键参考信息
2. 异常可以作为方法内部的一种特殊返回值,以便通知调用者底层的执行情况

# 处理方式

## JVM默认的处理方式

- 把异常的名称,异常原因以及异常出现的位置等信息输出在控制台                   
- 程序停止执行,下面的代码就不会继续执行了         

## 捕获异常(自己处理)

格式:

```markdown
try{
    可能出现异常的代码;
} catch(异常类名 变量名){
    异常的处理代码;
}
```

目的:当代码出现异常时,**可以让程序继续往下执行**

范例:

```java
public class Test {
    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5, 6};
        try {
            // 此处出现了异常,程序会创建ArrayIndexOutOfBoundsException对象
            // 拿着这个对象去catch中进行对比,看括号中的变量是否可以接收这个对象
            // 如果能被接收,则表示该异常被捕获,会执行catch里面对应的代码
            // 当catch里面的所有代码执行完毕,会继续执行try...catch体系下面的代码
            System.out.println(arr[10]);
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("索引越界了!");
        }
        System.out.println("看我执行了吗?");
        // 打印结果:"索引越界了!"
        // 打印结果:"看我执行了吗?"
    }
}
```

分析:
1. 如果try中没有遇到问题,怎么执行?

会把try里面的所有代码执行完毕,不会执行catch里面的代码

范例:

```java
public class Test {
    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5, 6};
        try {
            System.out.println(arr[1]);
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("索引越界了!");
        }
        System.out.println("看我执行了吗?");
        // 打印结果:"2"
        // 打印结果:"看我执行了吗?"
    }
}
```

2. 如果try中遇到多个问题,怎么执行?

会写多个catch与之匹配

细节:
1. **如果捕获多个异常,且这些异常中存在父子关系,那么父类一定要写在下面**
2. **在JDK7之后,可以在catch中同时捕获多个异常,中间用`|`隔开,表示如果出现了A异常或者B异常,采用同一种处理方案**

范例:

```java
public class Test {
    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5, 6};

        // JDK7之前
        // try {
        //     // ArrayIndexOutOfBoundsException
        //     System.out.println(arr[10]);
        //     // ArithmeticException
        //     System.out.println(2 / 0);
        //     // NullPointerException
        //     String s = null;
        //     System.out.println(s.equals("abc"));
        // } catch (ArrayIndexOutOfBoundsException e) {
        //     System.out.println("索引越界了!");
        // } catch (ArithmeticException e) {
        //     System.out.println("除数不能为0!");
        // } catch (NullPointerException e) {
        //     System.out.println("空指针异常!");
        // } catch (Exception e) {
        //     System.out.println("出现异常!");
        // }
        // System.out.println("看我执行了吗?");

        // JDK7之后
        // try {
        // // ArrayIndexOutOfBoundsException
        // System.out.println(arr[10]);
        // // ArithmeticException
        // System.out.println(2 / 0);
        // String s = null;
        // System.out.println(s.equals("abc"));
        // } catch (ArrayIndexOutOfBoundsException | ArithmeticException e) {
        // System.out.println("索引越界了!或者除数不能为0!");
        // } catch (NullPointerException e) {
        // System.out.println("空指针异常!");
        // } catch (Exception e) {
        // System.out.println("出现异常!");
        // }
        // System.out.println("看我执行了吗?");
    }
}
```

3. 如果try中遇到的问题没有被捕获,怎么执行?

相当于try...catch的代码白写,最终还是会交给JVM进行处理

范例:

```java
public class Test {
    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5, 6};

        try {
            // ArrayIndexOutOfBoundsException
            System.out.println(arr[10]);
        } catch (ArithmeticException e) {
            System.out.println("算数异常!");
        }
        // 打印结果:"ArrayIndexOutOfBoundsException异常"
        System.out.println("看我执行了吗?");
    }
}
```

4. 如果try中遇到了问题,那么try下面的其他代码还会不会执行?

下面的代码不会执行了,直接跳转到catch当中,执行对应catch里面的语句体                
如果没有对应的catch与之匹配,最终还是会交给JVM进行处理

范例:

```java
public class Test {
    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5, 6};

        try {
            // ArrayIndexOutOfBoundsException
            System.out.println(arr[10]);
            System.out.println("hello!");
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("索引越界异常!");
        }
        // 打印结果:"索引越界异常!"
        // 打印结果:"看我执行了吗?"
        System.out.println("看我执行了吗?");
    }
}
```

### 常用方法



## 抛出异常